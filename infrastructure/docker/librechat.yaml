# ============================================
# LibreChat Configuration for SaaS Architecture
# Version: 1.3.1
# ============================================

version: 1.3.1

# ============================================
# CACHE CONFIGURATION
# ============================================
cache: true

# ============================================
# MODEL SPECIFICATIONS
# ============================================
modelSpecs:
  enforce: false
  prioritize: false
  list:
    - name: "deepseek-chat"
      label: "DeepSeek Chat"
      description: "DeepSeek's main conversational model with function calling"
      default: true
      showIconInMenu: true
    - name: "deepseek-reasoner"
      label: "DeepSeek Reasoner (R1)"
      description: "Advanced reasoning model with chain-of-thought capabilities"
      default: false
      showIconInMenu: true

# ============================================
# CUSTOM ENDPOINTS
# ============================================
endpoints:
  custom:
    # ==========================================
    # Enterprise RAG API (New Architecture)
    # ==========================================
    - name: "Enterprise RAG"
      apiKey: "${DEEPSEEK_API_KEY}"
      baseURL: "http://api:8000/api/v1"
      models:
        default:
          - "deepseek-chat"
          - "deepseek-reasoner"
        fetch: false  # Use static model list
      titleConvo: true
      titleModel: "deepseek-chat"
      summarize: false
      summaryModel: "deepseek-chat"
      forcePrompt: false
      modelDisplayLabel: "Enterprise RAG"
      iconURL: "/images/logo.svg"
      
      # Tool Configuration
      addParams:
        tools:
          - type: "function"
            function:
              name: "search_internal_documents"
              description: "Search internal knowledge base for relevant information. Use this when users ask about company information, policies, or any domain-specific knowledge."
              parameters:
                type: "object"
                properties:
                  query:
                    type: "string"
                    description: "The search query to find relevant documents"
                  top_k:
                    type: "integer"
                    description: "Number of results to return (default: 5)"
                    default: 5
                required:
                  - query
      
      # Headers
      headers:
        x-api-version: "v1"
        x-client: "librechat"
      
      # Drop unused params
      dropParams:
        - "user"
        - "frequency_penalty"
        - "presence_penalty"
        - "top_p"

# ============================================
# FILE CONFIGURATION
# ============================================
fileConfig:
  endpoints:
    custom:
      disabled: false
      fileLimit: 10
      fileSizeLimit: 20  # MB
      totalSizeLimit: 100  # MB
      supportedMimeTypes:
        - "application/pdf"
        - "text/plain"
        - "text/markdown"
        - "application/vnd.openxmlformats-officedocument.wordprocessingml.document"
        - "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
        - "text/csv"

  serverFileSizeLimit: 100  # MB
  avatarSizeLimit: 2  # MB

# ============================================
# RATE LIMITING
# ============================================
rateLimits:
  fileUploads:
    ipMax: 100
    ipWindowInMinutes: 60
    userMax: 50
    userWindowInMinutes: 60
  
  conversationsImport:
    ipMax: 100
    ipWindowInMinutes: 60
    userMax: 50
    userWindowInMinutes: 60

# ============================================
# REGISTRATION & AUTHENTICATION
# ============================================
registration:
  socialLogins: []

# ============================================
# UI CONFIGURATION
# ============================================
interface:
  privacyPolicy:
    externalUrl: ""
    openNewTab: true
  
  termsOfService:
    externalUrl: ""
    openNewTab: true

# ============================================
# SECURITY
# ============================================
securityHeaders: true
