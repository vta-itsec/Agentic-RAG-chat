version: 1.2.8

cache: true

mcpServers:
  enterprise-rag:
    type: sse
    url: "http://mcp-rag-server:5173/sse"
    description: "Search internal knowledge base and retrieve company documents"
    timeout: 60000
    initTimeout: 15000
    serverInstructions: true

endpoints:
  custom:
    - name: "Enterprise RAG"
      apiKey: "${DEEPSEEK_API_KEY}"
      baseURL: "http://api:8000/api/v1"
      models:
        default: [
          "deepseek-chat",
          "deepseek-reasoner"
        ]
        fetch: false
      titleConvo: true
      titleModel: "deepseek-chat"
      summarize: false
      summaryModel: "deepseek-chat"
      forcePrompt: false
      modelDisplayLabel: "Enterprise RAG"
      dropParams: ["user", "frequency_penalty", "presence_penalty", "top_p"]
      # Enable MCP tools for this endpoint
      mcpServers:
        - enterprise-rag
      # Add prompt prefix to inject RAG context
      addParams:
        "system_message": |
          You are an Enterprise AI Assistant with access to company knowledge base.
          
          WORKFLOW:
          1. Analyze user question
          2. If it's about internal info â†’ CALL mcp tools
          3. Read the results
          4. Answer based on the retrieved documents
          5. Cite the source document title
          
          DO NOT make up information. 

fileConfig:
  endpoints:
    custom:
      disabled: false
      fileLimit: 10
      fileSizeLimit: 20  # MB
      totalSizeLimit: 100  # MB
      supportedMimeTypes:
        - "application/pdf"
        - "text/plain"
        - "text/markdown"
        - "application/vnd.openxmlformats-officedocument.wordprocessingml.document"
        - "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
        - "text/csv"

  serverFileSizeLimit: 100  # MB
  avatarSizeLimit: 2  # MB

rateLimits:
  fileUploads:
    ipMax: 100
    ipWindowInMinutes: 60
    userMax: 50
    userWindowInMinutes: 60
  
  conversationsImport:
    ipMax: 100
    ipWindowInMinutes: 60
    userMax: 50
    userWindowInMinutes: 60

registration:
  socialLogins: []

interface:
  privacyPolicy:
    externalUrl: "https://your-company.com/privacy"
    openNewTab: true
  
  termsOfService:
    externalUrl: "https://your-company.com/tos"
    openNewTab: true
